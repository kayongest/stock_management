<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>:: sTock</title>
    <link rel="icon" type="image/x-icon" href="../assets/img/warehouse.png" />
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
      name="viewport"
    />
    <meta content name="description" />
    <meta content name="author" />

    <link href="../assets/css/vendor.min.css" rel="stylesheet" />
    <link href="../assets/css/default/app.min.css" rel="stylesheet" />

    <link
      href="../assets/plugins/lightbox2/dist/css/lightbox.css"
      rel="stylesheet"
    />

    <!-- jQuery (required for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Bootstrap JS (optional if you use Bootstrap's JS features like modals) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>

    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Titillium+Web:wght@200;300;400;600;700&display=swap");

      * {
        font-family: "Titillium Web", sans-serif;
      }

      .app-header {
        background-color: #35374b;
      }
    </style>
  </head>
  <body>
    <div id="loader" class="app-loader">
      <span class="spinner"></span>
    </div>

    <div id="app" class="app app-header-fixed app-sidebar-fixed">
      <div id="header" class="app-header text-white">
        <div class="navbar-header">
          <a href="index.html" class="navbar-brand text-white">
            <b class="me-3px">[aB]</b>ility</a
          >
          <button
            type="button"
            class="navbar-mobile-toggler"
            data-toggle="app-sidebar-mobile"
          >
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>

        <div class="navbar-nav">
          <div class="navbar-item dropdown">
            <a
              href="#"
              data-bs-toggle="dropdown"
              class="navbar-link dropdown-toggle icon"
            >
              <i class="fa fa-caret-square-down text-white"></i>
              <span class="badge">5</span>
            </a>
            <div class="dropdown-menu media-list dropdown-menu-end">
              <div
                class="dropdown-header text-white"
                style="background-color: #16ad4d"
              >
                NOTIFICATIONS (5)
              </div>
              <a href="javascript:;" class="dropdown-item media">
                <div class="media-left">
                  <i class="fa fa-bug media-object bg-gray-500"></i>
                </div>
                <div class="media-body">
                  <h6 class="media-heading">
                    Server Error Reports
                    <i class="fa fa-exclamation-circle text-danger"></i>
                  </h6>
                  <div class="text-muted fs-10px">3 minutes ago</div>
                </div>
              </a>
              <a href="javascript:;" class="dropdown-item media">
                <div class="media-left">
                  <img
                    src="../assets/img/user/user-1.jpg"
                    class="media-object"
                    alt
                  />
                  <i
                    class="fab fa-facebook-messenger text-blue media-object-icon"
                  ></i>
                </div>
                <div class="media-body">
                  <h6 class="media-heading">John Smith</h6>
                  <p>
                    Quisque pulvinar tellus sit amet sem scelerisque tincidunt.
                  </p>
                  <div class="text-muted fs-10px">25 minutes ago</div>
                </div>
              </a>
              <a href="javascript:;" class="dropdown-item media">
                <div class="media-left">
                  <img
                    src="../assets/img/user/user-2.jpg"
                    class="media-object"
                    alt
                  />
                  <i
                    class="fab fa-facebook-messenger text-blue media-object-icon"
                  ></i>
                </div>
                <div class="media-body">
                  <h6 class="media-heading">Olivia</h6>
                  <p>
                    Quisque pulvinar tellus sit amet sem scelerisque tincidunt.
                  </p>
                  <div class="text-muted fs-10px">35 minutes ago</div>
                </div>
              </a>
              <a href="javascript:;" class="dropdown-item media">
                <div class="media-left">
                  <i class="fa fa-plus media-object bg-gray-500"></i>
                </div>
                <div class="media-body">
                  <h6 class="media-heading">New User Registered</h6>
                  <div class="text-muted fs-10px">1 hour ago</div>
                </div>
              </a>
              <a href="javascript:;" class="dropdown-item media">
                <div class="media-left">
                  <i class="fa fa-envelope media-object bg-gray-500"></i>
                  <i
                    class="fab fa-google text-warning media-object-icon fs-14px"
                  ></i>
                </div>
                <div class="media-body">
                  <h6 class="media-heading">New Email From John</h6>
                  <div class="text-muted fs-10px">2 hour ago</div>
                </div>
              </a>
              <div class="dropdown-footer text-center">
                <a href="javascript:;" class="text-decoration-none"
                  >View more</a
                >
              </div>
            </div>
          </div>
          <div class="navbar-item navbar-user dropdown text-white">
            <a
              href="#"
              class="navbar-link dropdown-toggle d-flex align-items-center"
              data-bs-toggle="dropdown"
            >
              <img src="../assets/img/user/user-13.jpg" alt />
              <span>
                <span class="d-none d-md-inline text-white">Kayonga Raul</span>
                <!-- <b class="caret"></b> -->
              </span>
            </a>
            <div class="dropdown-menu dropdown-menu-end me-1">
              <a href="extra_profile.html" class="dropdown-item"
                >Edit Profile</a
              >
              <a
                href="email_inbox.html"
                class="dropdown-item d-flex align-items-center"
              >
                Inbox
                <span class="badge bg-danger rounded-pill ms-auto pb-4px"
                  >2</span
                >
              </a>
              <a href="calendar.html" class="dropdown-item">Calendar</a>
              <a href="extra_settings_page.html" class="dropdown-item"
                >Settings</a
              >
              <div class="dropdown-divider"></div>
              <a href="login.html" class="dropdown-item">Log Out</a>
            </div>
          </div>
        </div>
      </div>

      <div id="sidebar" class="app-sidebar" data-bs-theme="dark">
        <div
          class="app-sidebar-content"
          data-scrollbar="true"
          data-height="100%"
        >
          <div class="menu">
            <div class="menu-profile">
              <a
                href="javascript:;"
                class="menu-profile-link"
                data-toggle="app-sidebar-profile"
                data-target="#appSidebarProfileMenu"
              >
                <div class="menu-profile-cover with-shadow"></div>
                <div class="menu-profile-image">
                  <img src="../assets/img/user/user-13.jpg" alt />
                </div>
                <div class="menu-profile-info">
                  <div class="d-flex align-items-center">
                    <div class="flex-grow-1">Kayonga Raul</div>
                  </div>
                  <small>Administrator</small>
                </div>
              </a>
            </div>
            <div class="menu-header">Navigation</div>
            <div class="menu-item">
              <a href="items.php" class="menu-link">
                <div class="menu-icon">
                  <i class="fa fa-boxes-packing"></i>
                </div>
                <div class="menu-text">Dashboard</div>
              </a>
            </div>
            <div class="menu-item active">
              <a href="stocks.html" class="menu-link">
                <div class="menu-icon">
                  <i class="fa fa-warehouse"></i>
                </div>
                <div class="menu-text">Stocks</div>
              </a>
            </div>
            <div class="menu-item">
              <a href="scan.html" class="menu-link">
                <div class="menu-icon">
                  <i class="fa fa-qrcode"></i>
                </div>
                <div class="menu-text">Scan</div>
              </a>
            </div>
            <div class="menu-item">
              <a href="users.php" class="menu-link">
                <div class="menu-icon">
                  <i class="fa fa-users"></i>
                </div>
                <div class="menu-text">Users</div>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="app-sidebar-bg" data-bs-theme="dark"></div>
      <div class="app-sidebar-mobile-backdrop">
        <a
          href="#"
          data-dismiss="app-sidebar-mobile"
          class="stretched-link"
        ></a>
      </div>

      <div id="content" class="app-content">
        <img
          src="../assets/img/warehouse.png"
          class="mt-2 mb-2 ms-2"
          width="50"
          height="50"
          alt=""
        />
        <h1 class="page-header">
          Stocks<small> header small text goes here...</small>
        </h1>
        <div class="row">
          <div class="col-md-4 mb-2">
            <div class="col-xl-12 col-lg-6">
              <div class="mb-10px mt-10px fs-10px">
                <b class="text-body">
                  <div class="col-sm-6">
                    <a
                      href="#modal-dialog"
                      class="btn btn-sm text-white"
                      style="background-color: #0b6b94"
                      data-bs-toggle="modal"
                      data-bs-target="#itemModal"
                      >ADD</a
                    >
                  </div></b
                >
              </div>
            </div>
          </div>
        </div>
        <div class="panel-footer">
          <div class="container">
            <div class="row"></div>
          </div>
        </div>

        <!-- Modal -->
        <div
          class="modal fade"
          id="itemModal"
          tabindex="-1"
          aria-labelledby="itemModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header" style="background-color: #20425f">
                <h4 class="modal-title text-white" id="itemModalLabel">
                  Add Stock
                </h4>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <form id="itemForm" enctype="multipart/form-data">
                  <!-- Hidden Input for Item ID -->
                  <input type="hidden" id="stock_id" name="stock_id" />

                  <!-- Grid System for Two Columns -->
                  <div class="row">
                    <!-- Column 1 -->
                    <div class="col-md-6">
                      <!-- Stock Name -->
                      <div class="mb-3">
                        <label for="stock_name" class="form-label"
                          >Stock Name</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="stock_name"
                          name="stock_name"
                          required
                        />
                      </div>

                      <!-- Stock Category -->
                      <div class="mb-3">
                        <label for="stock_category" class="form-label"
                          >Stock Category</label
                        >
                        <select
                          class="form-select"
                          id="stock_category"
                          name="stock_category"
                          required
                        >
                          <option value="">-- select --</option>
                          <option value="VIDEO">VIDEO</option>
                          <option value="IT">IT</option>
                          <option value="SOUND">SOUND</option>
                          <option value="SIS">SIS</option>
                          <option value="LIGHTS">LIGHTS</option>
                          <option value="OTHER">OTHER</option>
                        </select>
                      </div>

                      <!-- Stock Location -->
                      <div class="mb-3">
                        <label for="stock_location" class="form-label"
                          >Stock Location</label
                        >
                        <select
                          class="form-select"
                          id="stock_location"
                          name="stock_location"
                          required
                        >
                          <option value="">-- select --</option>
                          <option value="Masoro">Masoro</option>
                          <option value="KCC">KCC</option>
                          <option value="BK Arena">BK Arena</option>
                          <option value="Ndera">Ndera</option>
                          <option value="Rugando">Rugando</option>
                        </select>
                      </div>

                      <!-- Serial Number -->
                      <div class="mb-3">
                        <label for="serial_number" class="form-label"
                          >Stock ID</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="serial_number"
                          name="serial_number"
                          required
                        />
                      </div>
                    </div>

                    <!-- Column 2 -->
                    <div class="col-md-6">
                      <!-- Stock Status -->
                      <div class="mb-3">
                        <label for="stock_status" class="form-label"
                          >Stock Controller</label
                        >
                        <select
                          class="form-select"
                          id="stock_status"
                          name="stock_status"
                          required
                        >
                          <option value="">-- select --</option>
                          <option value="Working">Michel Kanka</option>
                          <option value="Faulty">Irene I</option>
                          <option value="Needs Repair">
                            Shadrack Niyikiza
                          </option>
                          <option value="Repaired">Prince St.</option>
                          <option value="Leased">Michel Carpenter</option>
                        </select>
                      </div>

                      <!-- Stock Image -->
                      <div class="mb-3">
                        <label for="stock_image" class="form-label"
                          >Stock Image</label
                        >
                        <input
                          type="file"
                          class="form-control"
                          id="stock_image"
                          name="stock_image"
                          accept="image/*"
                        />
                        <img
                          id="image_preview"
                          src="#"
                          alt="Image Preview"
                          class="img-fluid mt-2"
                          style="display: none; max-width: 100%"
                        />
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button type="button" class="btn btn-primary" id="savestock">
                  Save Item
                </button>
              </div>
            </div>
          </div>
        </div>

        <div id="options" class="mb-3 mt-2">
          <div
            class="d-flex flex-wrap text-nowrap mb-n1"
            id="filter"
            data-option-key="filter"
          >
            <a
              href="#show-all"
              class="btn btn-white btn-sm active border-0 me-1 mb-1"
              data-option-value="*"
              >Show All</a
            >
            <a
              href="#gallery-group-1"
              class="btn btn- text-white btn-sm border-0 me-1 mb-1"
              data-option-value=".gallery-group-1"
              style="background-color: #1975ab"
              >KCC</a
            >
            <a
              href="#gallery-group-2"
              class="btn btn- text text-white btn-sm border-0 me-1 mb-1"
              data-option-value=".gallery-group-2"
              style="background-color: #183d3d"
              >RUGANDO</a
            >
            <a
              href="#gallery-group-3"
              class="btn btn text-white btn-sm border-0 me-1 mb-1"
              data-option-value=".gallery-group-3"
              style="background-color: #5c8374"
              >BK ARENA</a
            >
            <a
              href="#gallery-group-4"
              class="btn btn text-white btn-sm border-0 me-1 mb-1"
              data-option-value=".gallery-group-4"
              style="background-color: #635985"
              >MASORO</a
            >
            <a
              href="#gallery-group-5"
              class="btn btn- text text-white btn-sm border-0 me-1 mb-1"
              data-option-value=".gallery-group-5"
              style="background-color: #735f32"
              >NDERA</a
            >
          </div>
        </div>

        <div id="gallery" class="gallery">
          <div class="image gallery-group-2">
            <div class="image-inner">
              <a
                href="../assets/img/gallery/gallery-1.jpg"
                data-lightbox="gallery-group-1"
              >
                <div
                  class="img"
                  style="
                    background-image: url(../assets/img/gallery/gallery-1.jpg);
                  "
                ></div>
              </a>
              <p class="image-caption" style="background-color: #183d3d">
                RUGANDO STOCK
              </p>
            </div>
            <div class="image-info">
              <h5 class="title">Location : RUGANDO KK189</h5>
            </div>
          </div>

          <div class="image gallery-group-1">
            <div class="image-inner">
              <a
                href="../assets/img/gallery/gallery-2.jpg"
                data-lightbox="gallery-group-1"
              >
                <div
                  class="img"
                  style="
                    background-image: url(../assets/img/gallery/gallery-2.jpg);
                  "
                ></div>
              </a>
              <p class="image-caption" style="background-color: #2d4263">
                KCC STOCK
              </p>
            </div>
            <div class="image-info">
              <h5 class="title">Location : Kigali Convention Center</h5>
            </div>
          </div>

          <div class="image gallery-group-3">
            <div class="image-inner">
              <a
                href="../assets/img/gallery/gallery-6.jpg"
                data-lightbox="gallery-group-3"
              >
                <div
                  class="img"
                  style="
                    background-image: url(../assets/img/gallery/gallery-6.jpg);
                  "
                ></div>
              </a>
              <p class="image-caption" style="background-color: #5c8374">
                BK ARENA STOCK
              </p>
            </div>
            <div class="image-info">
              <h5 class="title">Mi quis volutpat ornare sodales</h5>
            </div>
          </div>

          <div class="image gallery-group-4">
            <div class="image-inner">
              <a
                href="../assets/img/gallery/gallery-8.jpg"
                data-lightbox="gallery-group-4"
              >
                <div
                  class="img"
                  style="
                    background-image: url(../assets/img/gallery/gallery-8.jpg);
                  "
                ></div>
              </a>
              <p class="image-caption" style="background-color: #635985">
                MASORO STOCK
              </p>
            </div>
            <div class="image-info">
              <h5 class="title">Location: MASORO</h5>
            </div>
          </div>

          <div class="image gallery-group-5">
            <div class="image-inner">
              <a
                href="../assets/img/gallery/gallery-10.jpg"
                data-lightbox="gallery-group-5"
              >
                <div
                  class="img"
                  style="
                    background-image: url(../assets/img/gallery/gallery-10.jpg);
                  "
                ></div>
              </a>
              <p class="image-caption" style="background-color: #735f32">
                NDERA STOCK
              </p>
            </div>
            <div class="image-info">
              <h5 class="title">Location: NDERA</h5>
            </div>
          </div>
        </div>
      </div>

      <a
        href="javascript:;"
        class="btn btn-icon btn-circle btn-theme btn-scroll-to-top"
        data-toggle="scroll-to-top"
        ><i class="fa fa-angle-up"></i
      ></a>
    </div>

    <script>
      // JavaScript to handle the stock addition process
      document.addEventListener("DOMContentLoaded", () => {
        const itemForm = document.getElementById("itemForm");
        const saveStockButton = document.getElementById("savestock");
        const imagePreview = document.getElementById("image_preview");
        const stockImageInput = document.getElementById("stock_image");

        // Image preview functionality
        stockImageInput.addEventListener("change", (event) => {
          const file = event.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (e) => {
              imagePreview.src = e.target.result;
              imagePreview.style.display = "block";
            };
            reader.readAsDataURL(file);
          } else {
            imagePreview.style.display = "none";
          }
        });

        // Load item data into the modal if it's an edit
        $("#itemModal").on("show.bs.modal", function (e) {
          const stockId = $(e.relatedTarget).data("id"); // Assuming a data-id attribute in the button that triggers the modal
          if (stockId) {
            $.ajax({
              url: "/get_stock_details.php",
              type: "GET",
              data: { id: stockId },
              success: function (response) {
                $("#stock_id").val(response.id);
                $("#stock_name").val(response.stock_name);
                $("#stock_category").val(response.stock_category);
                $("#stock_location").val(response.stock_location);
                $("#serial_number").val(response.serial_number);
                $("#stock_status").val(response.stock_status);
                if (response.stock_image) {
                  $("#image_preview").attr("src", response.stock_image).show();
                }
              },
            });
          }
        });

        // Save item (Add/Update) via AJAX
        saveStockButton.addEventListener("click", () => {
          const formData = new FormData(itemForm);

          // AJAX request to save stock
          $.ajax({
            url: "/save_stock.php", // Server-side script to handle saving
            type: "POST",
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
              if (response.success) {
                Swal.fire(
                  "Success!",
                  "Stock item saved successfully.",
                  "success"
                );
                $("#itemModal").modal("hide");
                // Optionally, refresh the stock table or list
                if (typeof refreshStockTable === "function") {
                  refreshStockTable();
                }
              } else {
                Swal.fire("Error!", response.message, "error");
              }
            },
            error: function (error) {
              Swal.fire(
                "Error!",
                "An error occurred while saving. Please try again.",
                "error"
              );
            },
          });
        });
      });
    </script>

    <script
      src="../assets/js/vendor.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>
    <script
      src="../assets/js/app.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>

    <script
      src="../assets/plugins/datatables.net/js/dataTables.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>
    <script
      src="../assets/plugins/datatables.net-bs5/js/dataTables.bootstrap5.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>
    <script
      src="../assets/plugins/datatables.net-responsive/js/dataTables.responsive.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>
    <script
      src="../assets/plugins/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>
    <script
      src="../assets/js/demo/table-manage-default.demo.js"
      type="669e284be813e2276db48d03-text/javascript"
      
    ></script>
    <script
      src="../assets/plugins/%40highlightjs/cdn-assets/highlight.min.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>
    <script
      src="../assets/js/demo/render.highlight.js"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-Y3Q0VGQKY3"
      type="669e284be813e2276db48d03-text/javascript"
    ></script>

    <script
      src="../../../cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js"
      data-cf-settings="669e284be813e2276db48d03-|49"
      defer
    ></script>
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
    ></script>
  </body>

  <!-- Mirrored from seantheme.com/color-admin/admin/html/gallery.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 10 Sep 2024 13:59:13 GMT -->
</html>
